{% extends "base.html" %} {% block title %}Contact{% endblock %} {% block
description %}To contact Sergiy Duras, please use the contact form provided.{%
endblock %} {% block head %}{{ super() }}{% endblock %} {% block content %}
<section>
  <h1>Contact</h1>
  <div class="grid">
    <div>
      <p>
        If you would like to reach out, please fill out the form provided.
        Just enter your name, email address, and message, and I'll get back to you as soon as possible.
      </p>
    </div>
    <div>
      <form id="contact-form" action="/send_email" method="post">
        <label for="name">Your Name:</label>
        <input
          type="text"
          id="name"
          name="name"
          required
          placeholder="Enter your name"
        />
        <label for="email">Your Email:</label>
        <input
          type="email"
          id="email"
          name="email"
          required
          placeholder="Enter your email"
        />
        <label for="message">Your Message:</label>
        <textarea
          id="message"
          name="message"
          rows="3"
          required
          placeholder="Enter your message"
        ></textarea>

        <button type="submit">Send Message</button>
      </form>
    </div>
  </div>
</section>

<!-- Pico dialog -->
<dialog id="message-dialog">
  <article>
    <header>
      <h3 id="dialog-title">Message Sent</h3>
    </header>
    <p id="dialog-content">Your message was sent successfully!</p>
    <footer>
      <button onclick="document.getElementById('message-dialog').close()">Close</button>
    </footer>
  </article>
</dialog>

<!-- Inline JS -->
<script>
  const form = document.getElementById('contact-form');
  const dialog = document.getElementById('message-dialog');
  const dialogTitle = document.getElementById('dialog-title');
  const dialogContent = document.getElementById('dialog-content');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    const formData = new FormData(form);

    try {
      const response = await fetch(form.action, {
        method: form.method,
        body: formData,
      });

      if (response.ok) {
        dialogTitle.textContent = 'Thank you!';
        dialogContent.textContent = 'Your message has been sent successfully.';
        dialog.showModal();
        form.reset();
      } else {
        throw new Error('Sending failed');
      }
    } catch (error) {
      dialogTitle.textContent = 'Error!';
      dialogContent.textContent = 'There was a problem sending your message.';
      dialog.showModal();
    }
  });
</script>
{% endblock %}
