{% extends "base.html" %}

{% block title %}Homepage{% endblock %}
{% block description %}To contact Sergiy Duras, please use the contact form provided.{% endblock %}
{% block head %}{{ super() }}{% endblock %}
{% block content %}<section>
					<h1>Hello</h1>
						<div class="grid">
							<div>1</div>
							<div>
								<figure>
								  <picture>
									<source media="(max-width: 600px)" srcset="{{ url_for('static', filename='image-small.jpg') }}">
									<source media="(min-width: 601px)" srcset="{{ url_for('static', filename='image-large.jpg') }}">
									<img src="https://placehold.co/600x400/png" alt="A beautiful landscape">
								  </picture>
								  <figcaption>A beautiful landscape</figcaption>
								</figure>			
							</div>	
							</div>
					</section>
      <script>
        const showToast = (message, type = "success") => {
          const toast = document.getElementById("toast");
          toast.textContent = message;
          toast.className = `toast show ${type}`;
          toast.hidden = false;

          // Hide after 3 seconds
          setTimeout(() => {
            toast.classList.remove("show");
            setTimeout(() => {
              toast.hidden = true;
            }, 400);
          }, 3000);
        };

        document
          .getElementById("contact-form")
          .addEventListener("submit", function (event) {
            event.preventDefault();
            const formData = new FormData(this);
            const submitButton = event.target.querySelector("button");

            submitButton.disabled = true;
            submitButton.textContent = "Sending...";

            fetch(this.action, {
              method: this.method,
              body: formData,
            })
              .then((response) => response.json())
              .then((data) => {
                if (data.success) {
                  showToast("Message sent successfully!", "success");
                } else {
                  showToast(data.error || "Submission failed.", "error");
                }
              })
              .catch((error) => {
                showToast(
                  `Error: ${error.message || "Could not send message."}`,
                  "error"
                );
              })
              .finally(() => {
                submitButton.disabled = false;
                submitButton.textContent = "Send Message";
              });
          });
      </script>
      <div id="toast" class="toast" hidden></div>{% endblock %}